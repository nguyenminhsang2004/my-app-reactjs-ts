{"ast":null,"code":"var _jsxFileName = \"D:\\\\REACTJS\\\\APP\\\\client\\\\src\\\\features\\\\posts\\\\components\\\\PostItem.tsx\",\n    _s = $RefreshSig$();\n\nimport { Avatar, Button, Card, CardActions, CardContent, CardHeader, CardMedia, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton, Menu, MenuItem, Typography } from '@material-ui/core';\nimport { red } from '@material-ui/core/colors';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { Delete, Edit } from '@material-ui/icons';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport postApi from 'api/postApi';\nimport moment from 'moment';\nimport React, { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => createStyles({\n  root: {\n    maxWidth: 345\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%'\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  },\n  avatar: {\n    backgroundColor: red[500]\n  },\n  title: {\n    cursor: 'pointer'\n  }\n}));\nexport default function PostItem({\n  post,\n  onEdit,\n  onRemove\n}) {\n  _s();\n\n  const classes = useStyles();\n  const [openPost, setOpenPost] = useState(false);\n  const [likeCount, setLikeCount] = useState(post.like);\n  const [openConfirmRemove, setConfirmRemove] = useState(false);\n\n  const handleCloseConfirmRemove = () => {\n    setConfirmRemove(false);\n    setAnchorEl(null);\n  };\n\n  const handleOpenConfirmRemove = () => {\n    setConfirmRemove(true);\n  };\n\n  const handleOpenPost = () => {\n    setOpenPost(true);\n  };\n\n  const handleClosePost = () => {\n    setOpenPost(false);\n  };\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const openMenu = Boolean(anchorEl);\n\n  const handleOpenMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleEditPost = () => {\n    setAnchorEl(null);\n    onEdit === null || onEdit === void 0 ? void 0 : onEdit(post);\n  };\n\n  const handleRemovePost = () => {\n    setAnchorEl(null);\n    setConfirmRemove(false);\n    onRemove === null || onRemove === void 0 ? void 0 : onRemove(post._id);\n  };\n\n  const handleCloseMenu = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLikeClick = async () => {\n    try {\n      const response = await postApi.update({ ...post,\n        like: post.like + 1\n      });\n\n      if (response.success) {\n        setLikeCount(likeCount + 1);\n      } else {\n        toast.error(response.content.message);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n        \"aria-label\": \"recipe\",\n        className: classes.avatar,\n        src: post.author.imageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this),\n      action: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"settings\",\n          onClick: handleOpenMenu,\n          children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Menu, {\n          id: \"menu-appbar\",\n          anchorEl: anchorEl,\n          anchorOrigin: {\n            vertical: 'top',\n            horizontal: 'right'\n          },\n          keepMounted: true,\n          transformOrigin: {\n            vertical: 'top',\n            horizontal: 'right'\n          },\n          open: openMenu,\n          onClose: handleCloseMenu,\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: handleEditPost,\n            children: /*#__PURE__*/_jsxDEV(Edit, {\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: handleOpenConfirmRemove,\n            children: /*#__PURE__*/_jsxDEV(Delete, {\n              color: \"secondary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true),\n      title: post.author.fullName,\n      subheader: moment(post.createdAt).format('HH:MM MMM DD, YYYY')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardMedia, {\n      className: classes.media,\n      image: post.imageUrl,\n      title: \"Paella dish\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        className: classes.title,\n        variant: \"body2\",\n        color: \"textSecondary\",\n        component: \"p\",\n        onClick: handleOpenPost,\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n      disableSpacing: true,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"add to favorites\",\n        onClick: handleLikeClick,\n        children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n          color: \"secondary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), \"\\xA0 \", likeCount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openPost,\n      onClose: handleClosePost,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            paragraph: true,\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClosePost,\n          color: \"secondary\",\n          variant: \"contained\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openConfirmRemove,\n      onClose: handleCloseConfirmRemove,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \"Remove post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: [\"Are you sure remove post title: \\\"\", post === null || post === void 0 ? void 0 : post.title, \"\\\". \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 62\n          }, this), \"This action can't undo.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseConfirmRemove,\n          color: \"primary\",\n          variant: \"outlined\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleRemovePost,\n          color: \"secondary\",\n          variant: \"contained\",\n          autoFocus: true,\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PostItem, \"mIa6yDS6PELSj/cJ5QE197Zbq+Y=\", false, function () {\n  return [useStyles];\n});\n\n_c = PostItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostItem\");","map":{"version":3,"sources":["D:/REACTJS/APP/client/src/features/posts/components/PostItem.tsx"],"names":["Avatar","Button","Card","CardActions","CardContent","CardHeader","CardMedia","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","IconButton","Menu","MenuItem","Typography","red","createStyles","makeStyles","Delete","Edit","FavoriteIcon","MoreVertIcon","postApi","moment","React","useState","toast","useStyles","theme","root","maxWidth","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","title","cursor","PostItem","post","onEdit","onRemove","classes","openPost","setOpenPost","likeCount","setLikeCount","like","openConfirmRemove","setConfirmRemove","handleCloseConfirmRemove","setAnchorEl","handleOpenConfirmRemove","handleOpenPost","handleClosePost","anchorEl","openMenu","Boolean","handleOpenMenu","event","currentTarget","handleEditPost","handleRemovePost","_id","handleCloseMenu","handleLikeClick","response","update","success","error","content","message","console","log","author","imageUrl","vertical","horizontal","fullName","createdAt","format"],"mappings":"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","sourcesContent":["import {\r\n  Avatar,\r\n  Button,\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  CardMedia,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n  IconButton,\r\n  Menu,\r\n  MenuItem,\r\n  Typography,\r\n} from '@material-ui/core'\r\nimport { red } from '@material-ui/core/colors'\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\nimport { Delete, Edit } from '@material-ui/icons'\r\nimport FavoriteIcon from '@material-ui/icons/Favorite'\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert'\r\nimport postApi from 'api/postApi'\r\nimport { DataResponse, Post } from 'models'\r\nimport moment from 'moment'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { toast } from 'react-toastify'\r\n\r\nexport interface PostItemProps {\r\n  post: Post\r\n  onEdit: (post: Post) => void\r\n  onRemove: (id: string) => void\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 345,\r\n    },\r\n    media: {\r\n      height: 0,\r\n      paddingTop: '56.25%',\r\n    },\r\n    expand: {\r\n      transform: 'rotate(0deg)',\r\n      marginLeft: 'auto',\r\n      transition: theme.transitions.create('transform', {\r\n        duration: theme.transitions.duration.shortest,\r\n      }),\r\n    },\r\n    expandOpen: {\r\n      transform: 'rotate(180deg)',\r\n    },\r\n    avatar: {\r\n      backgroundColor: red[500],\r\n    },\r\n    title: {\r\n      cursor: 'pointer',\r\n    },\r\n  })\r\n)\r\n\r\nexport default function PostItem({ post, onEdit, onRemove }: PostItemProps) {\r\n  const classes = useStyles()\r\n\r\n  const [openPost, setOpenPost] = useState(false)\r\n\r\n  const [likeCount, setLikeCount] = useState(post.like)\r\n\r\n  const [openConfirmRemove, setConfirmRemove] = useState(false)\r\n\r\n  const handleCloseConfirmRemove = () => {\r\n    setConfirmRemove(false)\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const handleOpenConfirmRemove = () => {\r\n    setConfirmRemove(true)\r\n  }\r\n\r\n  const handleOpenPost = () => {\r\n    setOpenPost(true)\r\n  }\r\n\r\n  const handleClosePost = () => {\r\n    setOpenPost(false)\r\n  }\r\n\r\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null)\r\n  const openMenu = Boolean(anchorEl)\r\n\r\n  const handleOpenMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget)\r\n  }\r\n\r\n  const handleEditPost = () => {\r\n    setAnchorEl(null)\r\n    onEdit?.(post)\r\n  }\r\n\r\n  const handleRemovePost = () => {\r\n    setAnchorEl(null)\r\n    setConfirmRemove(false)\r\n    onRemove?.(post._id)\r\n  }\r\n\r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const handleLikeClick = async () => {\r\n    try {\r\n      const response: DataResponse<Post> = await postApi.update({ ...post, like: post.like + 1 })\r\n      if (response.success) {\r\n        setLikeCount(likeCount + 1)\r\n      } else {\r\n        toast.error(response.content.message)\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar aria-label=\"recipe\" className={classes.avatar} src={post.author.imageUrl} />\r\n        }\r\n        action={\r\n          <>\r\n            <IconButton aria-label=\"settings\" onClick={handleOpenMenu}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              keepMounted\r\n              transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              open={openMenu}\r\n              onClose={handleCloseMenu}\r\n            >\r\n              <MenuItem onClick={handleEditPost}>\r\n                <Edit color=\"primary\" />\r\n              </MenuItem>\r\n              <MenuItem onClick={handleOpenConfirmRemove}>\r\n                <Delete color=\"secondary\" />\r\n              </MenuItem>\r\n            </Menu>\r\n          </>\r\n        }\r\n        title={post.author.fullName}\r\n        subheader={moment(post.createdAt).format('HH:MM MMM DD, YYYY')}\r\n      />\r\n      <CardMedia className={classes.media} image={post.imageUrl} title=\"Paella dish\" />\r\n      <CardContent>\r\n        <Typography\r\n          className={classes.title}\r\n          variant=\"body2\"\r\n          color=\"textSecondary\"\r\n          component=\"p\"\r\n          onClick={handleOpenPost}\r\n        >\r\n          {post.title}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions disableSpacing>\r\n        <IconButton aria-label=\"add to favorites\" onClick={handleLikeClick}>\r\n          <FavoriteIcon color=\"secondary\" />\r\n        </IconButton>\r\n        &nbsp; {likeCount}\r\n      </CardActions>\r\n      {/* Dialog post content */}\r\n      <Dialog\r\n        open={openPost}\r\n        onClose={handleClosePost}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{post.title}</DialogTitle>\r\n        <DialogContent>\r\n          <CardContent>\r\n            <Typography paragraph>{post.content}</Typography>\r\n          </CardContent>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClosePost} color=\"secondary\" variant=\"contained\">\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      {/* Dialog confirm remove post */}\r\n      <Dialog\r\n        open={openConfirmRemove}\r\n        onClose={handleCloseConfirmRemove}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">Remove post</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Are you sure remove post title: \"{post?.title}\". <br />\r\n            This action can&apos;t undo.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseConfirmRemove} color=\"primary\" variant=\"outlined\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleRemovePost} color=\"secondary\" variant=\"contained\" autoFocus>\r\n            Remove\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Card>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}