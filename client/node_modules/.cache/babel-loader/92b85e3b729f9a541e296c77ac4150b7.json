{"ast":null,"code":"var _jsxFileName = \"D:\\\\REACTJS\\\\APP\\\\client\\\\src\\\\features\\\\posts\\\\components\\\\PostItem.tsx\",\n    _s = $RefreshSig$();\n\nimport { Avatar, Button, Card, CardActions, CardContent, CardHeader, CardMedia, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton, Menu, MenuItem, Typography } from '@material-ui/core';\nimport { red } from '@material-ui/core/colors';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport { Delete, Edit } from '@material-ui/icons';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport postApi from 'api/postApi';\nimport moment from 'moment';\nimport React, { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => createStyles({\n  root: {\n    maxWidth: 345\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%'\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  },\n  avatar: {\n    backgroundColor: red[500]\n  },\n  title: {\n    cursor: 'pointer'\n  }\n}));\nexport default function PostItem({\n  post,\n  onEdit,\n  onRemove\n}) {\n  _s();\n\n  const classes = useStyles();\n  const [openPost, setOpenPost] = useState(false);\n  const [likeCount, setLikeCount] = useState(post.like);\n  const [openConfirmRemove, setConfirmRemove] = useState(false);\n\n  const handleCloseConfirmRemove = () => {\n    setConfirmRemove(false);\n    setAnchorEl(null);\n  };\n\n  const handleOpenConfirmRemove = () => {\n    setConfirmRemove(true);\n  };\n\n  const handleOpenPost = () => {\n    setOpenPost(true);\n  };\n\n  const handleClosePost = () => {\n    setOpenPost(false);\n  };\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const openMenu = Boolean(anchorEl);\n\n  const handleOpenMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleEditPost = () => {\n    setAnchorEl(null);\n    onEdit === null || onEdit === void 0 ? void 0 : onEdit(post);\n  };\n\n  const handleRemovePost = () => {\n    setAnchorEl(null);\n    setConfirmRemove(false);\n    onRemove === null || onRemove === void 0 ? void 0 : onRemove(post._id);\n  };\n\n  const handleCloseMenu = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLikeClick = async () => {\n    try {\n      const response = await postApi.update({ ...post,\n        like: post.like + 1\n      });\n\n      if (response.success) {\n        setLikeCount(response.content.data.like);\n      } else {\n        toast.error(response.content.message);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n        \"aria-label\": \"recipe\",\n        className: classes.avatar,\n        src: post.author.imageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }, this),\n      action: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"settings\",\n          onClick: handleOpenMenu,\n          children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Menu, {\n          id: \"menu-appbar\",\n          anchorEl: anchorEl,\n          anchorOrigin: {\n            vertical: 'top',\n            horizontal: 'right'\n          },\n          keepMounted: true,\n          transformOrigin: {\n            vertical: 'top',\n            horizontal: 'right'\n          },\n          open: openMenu,\n          onClose: handleCloseMenu,\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: handleEditPost,\n            children: /*#__PURE__*/_jsxDEV(Edit, {\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 64\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: handleOpenConfirmRemove,\n            children: /*#__PURE__*/_jsxDEV(Delete, {\n              color: \"secondary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 73\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true),\n      title: post.author.fullName,\n      subheader: moment(post.createdAt).format('HH:MM MMM DD, YYYY')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardMedia, {\n      className: classes.media,\n      image: post.imageUrl,\n      title: \"Paella dish\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        className: classes.title,\n        variant: \"body2\",\n        color: \"textSecondary\",\n        component: \"p\",\n        onClick: handleOpenPost,\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n      disableSpacing: true,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"add to favorites\",\n        children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n          color: \"secondary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), \"\\xA0 \", likeCount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openPost,\n      onClose: handleClosePost,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            paragraph: true,\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClosePost,\n          color: \"secondary\",\n          variant: \"contained\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openConfirmRemove,\n      onClose: handleCloseConfirmRemove,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \"Remove post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: [\"Are you sure remove post title: \\\"\", post === null || post === void 0 ? void 0 : post.title, \"\\\". \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 74\n          }, this), \"This action can't undo.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseConfirmRemove,\n          color: \"primary\",\n          variant: \"outlined\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleRemovePost,\n          color: \"secondary\",\n          variant: \"contained\",\n          autoFocus: true,\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PostItem, \"mIa6yDS6PELSj/cJ5QE197Zbq+Y=\", false, function () {\n  return [useStyles];\n});\n\n_c = PostItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostItem\");","map":{"version":3,"sources":["D:/REACTJS/APP/client/src/features/posts/components/PostItem.tsx"],"names":["Avatar","Button","Card","CardActions","CardContent","CardHeader","CardMedia","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","IconButton","Menu","MenuItem","Typography","red","createStyles","makeStyles","Delete","Edit","FavoriteIcon","MoreVertIcon","postApi","moment","React","useState","toast","useStyles","theme","root","maxWidth","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","title","cursor","PostItem","post","onEdit","onRemove","classes","openPost","setOpenPost","likeCount","setLikeCount","like","openConfirmRemove","setConfirmRemove","handleCloseConfirmRemove","setAnchorEl","handleOpenConfirmRemove","handleOpenPost","handleClosePost","anchorEl","openMenu","Boolean","handleOpenMenu","event","currentTarget","handleEditPost","handleRemovePost","_id","handleCloseMenu","handleLikeClick","response","update","success","content","data","error","message","console","log","author","imageUrl","vertical","horizontal","fullName","createdAt","format"],"mappings":"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","sourcesContent":["import {\r\n    Avatar,\r\n    Button,\r\n    Card, CardActions, CardContent, CardHeader, CardMedia,\r\n    Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton, Menu, MenuItem, Typography\r\n} from '@material-ui/core';\r\nimport { red } from '@material-ui/core/colors';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport postApi from 'api/postApi';\r\nimport { DataResponse, Post } from 'models';\r\nimport moment from 'moment';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport interface PostItemProps {\r\n    post: Post;\r\n    onEdit: (post: Post) => void;\r\n    onRemove: (id: string) => void;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 345,\r\n    },\r\n    media: {\r\n      height: 0,\r\n      paddingTop: '56.25%', \r\n    },\r\n    expand: {\r\n      transform: 'rotate(0deg)',\r\n      marginLeft: 'auto',\r\n      transition: theme.transitions.create('transform', {\r\n        duration: theme.transitions.duration.shortest,\r\n      }),\r\n    },\r\n    expandOpen: {\r\n      transform: 'rotate(180deg)',\r\n    },\r\n    avatar: {\r\n      backgroundColor: red[500],\r\n    },\r\n    title: {\r\n        cursor: 'pointer'\r\n    },\r\n  })\r\n);\r\n\r\nexport default function PostItem({ post, onEdit, onRemove }: PostItemProps) {\r\n    const classes = useStyles();\r\n\r\n    const [openPost, setOpenPost] = useState(false);\r\n\r\n    const[likeCount, setLikeCount] = useState(post.like);\r\n\r\n    const [openConfirmRemove, setConfirmRemove] = useState(false);\r\n\r\n    const handleCloseConfirmRemove = () => {\r\n        setConfirmRemove(false);\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleOpenConfirmRemove = () => {\r\n        setConfirmRemove(true);\r\n    };\r\n\r\n    const handleOpenPost = () => {\r\n        setOpenPost(true);\r\n    };\r\n\r\n    const handleClosePost = () => {\r\n        setOpenPost(false);\r\n    };\r\n\r\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n    const openMenu = Boolean(anchorEl);\r\n    \r\n\r\n    const handleOpenMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleEditPost = () => {\r\n        setAnchorEl(null);\r\n        onEdit?.(post);\r\n    }\r\n\r\n    const handleRemovePost = () => {\r\n        setAnchorEl(null);\r\n        setConfirmRemove(false);\r\n        onRemove?.(post._id);\r\n    }\r\n\r\n    const handleCloseMenu = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleLikeClick = async () => {\r\n        try {\r\n            const response: DataResponse<Post> = await postApi.update({...post,like: post.like + 1});\r\n            if(response.success){\r\n                setLikeCount(response.content.data.like);\r\n            }\r\n            else{\r\n                toast.error(response.content.message);\r\n            }\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardHeader\r\n                avatar={\r\n                    <Avatar aria-label=\"recipe\" className={classes.avatar} src={post.author.imageUrl}/>\r\n                }\r\n                action={\r\n                    <>\r\n                        <IconButton \r\n                            aria-label=\"settings\"\r\n                            onClick={handleOpenMenu}\r\n                        >\r\n                            <MoreVertIcon />\r\n                        </IconButton>\r\n                        <Menu\r\n                            id=\"menu-appbar\"\r\n                            anchorEl={anchorEl}\r\n                            anchorOrigin={{\r\n                                vertical: 'top',\r\n                                horizontal: 'right',\r\n                            }}\r\n                            keepMounted\r\n                            transformOrigin={{\r\n                                vertical: 'top',\r\n                                horizontal: 'right',\r\n                            }}\r\n                            open={openMenu}\r\n                            onClose={handleCloseMenu}\r\n                        >\r\n                            <MenuItem onClick={handleEditPost}><Edit color=\"primary\"/></MenuItem>\r\n                            <MenuItem onClick={handleOpenConfirmRemove}><Delete color=\"secondary\"/></MenuItem>\r\n                        </Menu>\r\n                    </>\r\n                }\r\n                title={post.author.fullName}\r\n                subheader={moment(post.createdAt).format('HH:MM MMM DD, YYYY')}\r\n            />\r\n            <CardMedia\r\n                className={classes.media}\r\n                image={post.imageUrl}\r\n                title=\"Paella dish\"\r\n            />\r\n            <CardContent>\r\n                <Typography className={classes.title} variant=\"body2\" color=\"textSecondary\" component=\"p\" onClick={handleOpenPost}>\r\n                    {post.title}\r\n                </Typography>\r\n            </CardContent>\r\n            <CardActions disableSpacing>\r\n                <IconButton aria-label=\"add to favorites\">\r\n                    <FavoriteIcon color=\"secondary\" /> \r\n                </IconButton>\r\n                &nbsp; {likeCount}\r\n            </CardActions>\r\n            {/* Dialog post content */}\r\n            <Dialog\r\n                open={openPost}\r\n                onClose={handleClosePost}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">{post.title}</DialogTitle>\r\n                <DialogContent>\r\n                    <CardContent>\r\n                        <Typography paragraph>\r\n                            {post.content}\r\n                        </Typography>\r\n                    </CardContent>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClosePost} color=\"secondary\" variant=\"contained\">\r\n                        Close\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            {/* Dialog confirm remove post */}\r\n            <Dialog\r\n                open={openConfirmRemove}\r\n                onClose={handleCloseConfirmRemove}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">Remove post</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        Are you sure remove post title: \"{post?.title}\". <br/>\r\n                        This action can&apos;t undo.\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleCloseConfirmRemove} color=\"primary\" variant=\"outlined\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={handleRemovePost} color=\"secondary\" variant=\"contained\" autoFocus>\r\n                        Remove\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n        </Card>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}